<!doctype html>
<html>

<head>
    <script src="./index.ts" type="module"></script>
    <style>
        * {
            box-sizing: border-box;
        }

        *[hidden] {
            display: none !important;
        }

        li {
            position: relative;
            margin-top: 10px;
        }

        li:not(:last-of-type):has(ol)::before {
            content: '';
            position: absolute;
            top: 1.5em;
            bottom: 0;
            left: -1em;
            border-left: 1px solid black;
        }

        li span.token {
            font-family: monospace;
            background-color: rgb(231, 231, 231);
            border: 1px solid black;
            padding: 2px 4px;
            border-radius: 5px;
        }

        li span.prob {
            font-size: 80%;
        }

        li span.extra {
            font-size: 80%;
            opacity: 50%;
        }

        li:hover {
            color: red;
        }

        li>div:hover button.add-prefill {
            font-size: 75%;
            display: inline-block;
            padding: 0;
            margin: 0;
            background: none;
            border: none;
        }

        li:not(:hover) {
            color: black;
        }

        button.add-prefill,
        li>div:not(:hover) button.add-prefill {
            display: none;
        }

        .spinner {
            display: inline-block;
            width: 1em;
            height: 1em;
            border: .15em solid currentColor;
            border-right-color: transparent;
            border-radius: 50%;
            animation: s .6s linear infinite
        }

        @keyframes s {
            to {
                transform: rotate(1turn)
            }
        }
    </style>
</head>

<body>
    <div>
        <label>
            Base URL:
            <input id="base-url" type="text" autocapitalize="off" autocomplete="off" />
        </label>
        <label>
            API key:
            <input id="api-key" type="password" />
        </label>
        <label>
            Model name:
            <input id="model-name" type="text" autocapitalize="off" autocomplete="off" />
        </label>
    </div>
    <hr />
    <div>
        <label>
            Prompt:
            <textarea id="prompt"></textarea>
        </label>
        <label>
            Prefill:
            <textarea id="prefill"></textarea>
        </label>
    </div>
    <hr />
    <div>
        <label>
            Depth:
            <input id="depth" type="number" min="1" max="100" value="5" />
            <abbr title="Expand this many tokens deep."><small>(?)</small></abbr>
        </label>
        <label>
            Max children:
            <input id="max-width" type="number" min="1" max="100" value="5" />
            <abbr title="Expand up to this many child tokens."><small>(?)</small></abbr>
        </label>
        <label>
            Probability threshold:
            <input id="cover-prob" type="number" min="0" max="100" step="5" value="80" />
            <abbr
                title="Expand children until the cumulative probability reaches this value, or max children."><small>(?)</small></abbr>
        </label>
        <button id="run">Run</button>
        <div class="spinner" hidden></div>
    </div>
    <hr />
    <div id="tree-container">
        <ol>
            <li>
                <div>
                    <span class="token"><strong>‚ê£comparing</strong></span>
                    <span class="prob">(100.00%)</span>
                    <span class="extra">[0.0000] </span>
                    <button class="add-prefill" data-uuid="6d2322fc-2a04-434c-9455-996e96206386"
                        title="Add to prefill">üì•</button>
                </div>
                <ol>
                    <li>
                        <div>
                            <span class="token"><strong>:‚Üµ</strong></span>
                            <span class="prob">(99.98%)</span>
                            <span class="extra">[-0.0002] </span>
                            <button class="add-prefill" data-uuid="9e8f06f9-1d5f-4990-abbd-6a98f9643a75"
                                title="Add to prefill">üì•</button>
                        </div>
                        <ol>
                            <li>
                                <div>
                                    <span class="token"><strong>-</strong></span>
                                    <span class="prob">(99.86%)</span>
                                    <span class="extra">[-0.0014] </span>
                                    <button class="add-prefill" data-uuid="4e9bcb23-a133-416b-971a-8cef63bc65c5"
                                        title="Add to prefill">üì•</button>
                                </div>
                                <ol>
                                    <li>
                                        <div>
                                            <span class="token"><strong>‚ê£**</strong></span>
                                            <span class="prob">(88.84%)</span>
                                            <span class="extra">[-0.1183] </span>
                                            <button class="add-prefill" data-uuid="90c1602b-63c4-40f5-a904-865064d961df"
                                                title="Add to prefill">üì•</button>
                                        </div>
                                        <ol>
                                            <li>
                                                <div>
                                                    <span class="token"><strong>9</strong></span>
                                                    <span class="prob">(100.00%)</span>
                                                    <span class="extra">[0.0000] </span>
                                                    <button class="add-prefill"
                                                        data-uuid="0909c3b3-f3cf-4a5f-b449-ee23cf8ca65f"
                                                        title="Add to prefill">üì•</button>
                                                </div>
                                                <ol>
                                                    <li>
                                                        <div>
                                                            <span class="token"><strong>.</strong></span>
                                                            <span class="prob">(100.00%)</span>
                                                            <span class="extra">[0.0000] </span>
                                                            <button class="add-prefill"
                                                                data-uuid="04846248-99e5-4b14-b7e1-7d7fe0a49113"
                                                                title="Add to prefill">üì•</button>
                                                        </div>
                                                        <ol>
                                                            <li>
                                                                <div>
                                                                    <span class="token">9</span>
                                                                    <span class="prob">(100.00%)</span>
                                                                    <span class="extra">[0.0000] </span>
                                                                    <button class="add-prefill"
                                                                        data-uuid="db725213-5106-441c-b079-3611401cab4d"
                                                                        title="Add to prefill">üì•</button>
                                                                </div>

                                                            </li>
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>

                                    <li>
                                        <div>
                                            <span class="token"><strong>‚ê£</strong></span>
                                            <span class="prob">(11.16%)</span>
                                            <span class="extra">[-2.1930] </span>
                                            <button class="add-prefill" data-uuid="88df0ac6-c182-4168-b1b1-8688187d2a1b"
                                                title="Add to prefill">üì•</button>
                                        </div>
                                        <ol>
                                            <li>
                                                <div>
                                                    <span class="token"><strong>9</strong></span>
                                                    <span class="prob">(100.00%)</span>
                                                    <span class="extra">[0.0000] </span>
                                                    <button class="add-prefill"
                                                        data-uuid="5fd8fffa-37a5-419f-8d54-cef1a4937ccb"
                                                        title="Add to prefill">üì•</button>
                                                </div>
                                                <ol>
                                                    <li>
                                                        <div>
                                                            <span class="token"><strong>.</strong></span>
                                                            <span class="prob">(100.00%)</span>
                                                            <span class="extra">[0.0000] </span>
                                                            <button class="add-prefill"
                                                                data-uuid="fb7bc79a-ec3b-4586-91b4-dc9b4f0ec0cc"
                                                                title="Add to prefill">üì•</button>
                                                        </div>
                                                        <ol>
                                                            <li>
                                                                <div>
                                                                    <span class="token">9</span>
                                                                    <span class="prob">(100.00%)</span>
                                                                    <span class="extra">[0.0000] </span>
                                                                    <button class="add-prefill"
                                                                        data-uuid="3bed9f95-4429-4375-9380-844ef8b0d5c6"
                                                                        title="Add to prefill">üì•</button>
                                                                </div>

                                                            </li>
                                                        </ol>
                                                    </li>
                                                </ol>
                                            </li>
                                        </ol>
                                    </li>
                                </ol>
                            </li>
                        </ol>
                    </li>
                </ol>
            </li>
        </ol>
    </div>
</body>

</html>